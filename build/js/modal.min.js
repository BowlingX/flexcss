!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FlexCss=t():e.FlexCss=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="../",t(0)}([function(e,t,n){e.exports=n(18)},function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=["webkit","moz","MS","o",""],a="is-collision-left",r="is-collision-right",l="is-collision-bottom",s=function(){function t(){n(this,t)}return i(t,null,[{key:"prefixedAnimateEvent",value:function(e,t,n){for(var i=function l(t){n.apply(e,[t,l])},a=0;a<o.length;a++){o[a]||(t=t.toLowerCase());var r=o[a]+t;e.addEventListener(r,i,!0)}}},{key:"whichTransitionEndEvent",value:function(){var e=void 0,t=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}},{key:"isPartOfNode",value:function(e,t){if(!e||!t)return!1;for(var n=e;n!==t&&null!==n&&n!==t;)n=n.parentNode;return null!==n}},{key:"parentsUntil",value:function(e,t){if(!e)return!1;for(var n=e;!t(n)&&null!==n;)n=n.parentNode;return n}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"getScrollBarWidth",value:function(){var t=e.document,n=t.createElement("p");n.style.width="100%",n.style.height="200px";var i=t.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.overflow="hidden",i.appendChild(n),t.body.appendChild(i);var o=n.offsetWidth;i.style.overflow="scroll";var a=n.offsetWidth;return o===a&&(a=i.clientWidth),t.body.removeChild(i),o-a}},{key:"addEventOnce",value:function(e,t,n,i){var o=function a(o){n(o,n),t.removeEventListener(e,a,i)};return t.addEventListener(e,o,i),o}},{key:"isVisible",value:function(e){return e.offsetWidth>0&&e.offsetHeight>0}},{key:"dashToCamelCase",value:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}},{key:"copy",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"applyOptionsFromElement",value:function(e,n){if(!e)return n;for(var i=e.attributes,o=0;o<i.length;o++){var a=i[o];if(a){var r=t.dashToCamelCase(a.nodeName.replace("data-","")),l=a.nodeValue;if(n.hasOwnProperty(r)){if("function"==typeof n[r])continue;"boolean"==typeof n[r]?n[r]=1===parseInt(l||1):n[r]=l}}}return n}},{key:"setupPositionNearby",value:function(e,n,i,o,s){var u=0,d=0;t.parentsUntil(e.parentNode,function(e){if(!(e instanceof HTMLElement))return!1;var i=window.getComputedStyle(e);return t.isPartOfNode(n,e)?(i&&"relative"===i.position&&(u+=e.offsetTop||0,d+=e.offsetLeft||0),!1):!0});var c=e instanceof HTMLElement?e.getBoundingClientRect():e,f=n.getBoundingClientRect(),h=i.getBoundingClientRect(),v=c.top-u,p=c.right,m=v-f.height<=0,y=window.innerHeight<v+u+c.height+f.height,E=p<f.width,g=c.left,C=g+f.width>h.width,_=n.classList;_.remove(r),_.remove(a),_.remove(l);var O=void 0,S=void 0;if(E&&!C)S=c.left-h.left-d+"px",_.add(a);else{var T=p-f.width-h.left-d+"px",b=(g+c.width/2-f.width/2||0)-h.left,L=b+f.width>h.width;o&&!L?S=b+"px":(_.add(r),S=T)}return y||s&&!m?(O=v-f.height-h.top+"px",_.add(l)):O=v+c.height-h.top+"px",n.style.cssText="top:"+O+";left:"+S+";",n}},{key:"scrollToElement",value:function(e,t){if(e.scrollIntoView(),t&&("function"==typeof t&&(t=t()),t>0)){var n=window.scrollY||window.pageYOffset;n&&window.scroll(0,n-t)}}}]),t}();t["default"]=s}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),l=i(r);e.FLEXCSS_GLOBAL_SETTINGS||!function(){e.FLEXCSS_GLOBAL_SETTINGS={smallBreakpoint:768,scrollbarUpdateNodes:null!==e.document.body?[e.document.body]:[],darkenerFadeDelay:100,canvasToggledClass:"toggled-canvas"},e.FLEXCSS_CONST_IS_IOS=null,e.FLEXCSS_CONST_IS_TOUCH=null,e.FLEXCSS_CONST_IS_IE=null,e.FLEXCSS_CONST_TAB_EVENT="click";var t=function(){e.FLEXCSS_CONST_SCROLLBAR_WIDTH=l["default"].getScrollBarWidth(),e.FLEXCSS_CONST_TRANSITION_EVENT=l["default"].whichTransitionEndEvent()};"loading"!==e.document.readyState?t():document.addEventListener("DOMContentLoaded",function(){t()})}();var s=function(){function t(){o(this,t)}return a(t,null,[{key:"setup",value:function(t){Object.assign(e.FLEXCSS_GLOBAL_SETTINGS,t)}},{key:"get",value:function(){return e.FLEXCSS_GLOBAL_SETTINGS}},{key:"isIosDevice",value:function(){return e.FLEXCSS_CONST_IS_IOS||(e.FLEXCSS_CONST_IS_IOS=e.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)),e.FLEXCSS_CONST_IS_IOS}},{key:"isTouchDevice",value:function(){return e.FLEXCSS_CONST_IS_TOUCH||(e.FLEXCSS_CONST_IS_TOUCH="ontouchstart"in window||!!e.navigator.msMaxTouchPoints),e.FLEXCSS_CONST_IS_TOUCH}},{key:"isIE",value:function(){return e.FLEXCSS_CONST_IS_IE||(e.FLEXCSS_CONST_IS_IE="ActiveXObject"in window),e.FLEXCSS_CONST_IS_IE}},{key:"getTransitionEvent",value:function(){return e.FLEXCSS_CONST_TRANSITION_EVENT}},{key:"getScrollbarWidth",value:function(){return e.FLEXCSS_CONST_SCROLLBAR_WIDTH}},{key:"getTabEvent",value:function(){return e.FLEXCSS_CONST_TAB_EVENT}}]),t}();t["default"]=s}).call(t,function(){return this}())},,function(e,t){(function(e){/*!
	 * FlexCss.Widget
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function t(i){var o=this;if(n(this,t),this.asyncContent=null,this._isWidget=!0,i){if(this.element=i instanceof HTMLElement?i:e.document.getElementById(i),!this.element)throw"Could not found element with ID: "+i;this.element.hfWidgetInstance=this,this.setAsync(function(){return new Promise(function(e){e(o.element)}.bind(o))}.bind(this))}this.finalContent=null}return o(t,[{key:"getAsync",value:function(){return this.asyncContent()}},{key:"setAsync",value:function(e){return this.asyncContent=e,this}},{key:"getFinalContent",value:function(){return this.finalContent}},{key:"setElement",value:function(e){return this.element=e,this}},{key:"destroy",value:function(){return this.finalContent&&this.finalContent.parentNode?(this.finalContent.parentNode.removeChild(this.finalContent),!0):(delete this.element,delete this.asyncContent,delete this.finalContent,!1)}}],[{key:"findWidget",value:function(e){return e?e.hfWidgetInstance:void 0}},{key:"isWidget",value:function(e){return e instanceof t||"object"===("undefined"==typeof e?"undefined":i(e))&&e.hasOwnProperty("_isWidget")}}]),t}();t["default"]=a}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0}),void function(){if(!e.CustomEvent||"function"!=typeof e.CustomEvent){var t;t=function(e,t){var n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},t.prototype=e.Event.prototype,e.CustomEvent=t}}();var o=function(){function e(t,i){n(this,e),this.target=t,this.defaultOptions={bubbles:!0,cancelable:!0},this.name=i}return i(e,[{key:"withOptions",value:function(e){return Object.assign(this.defaultOptions,e||{}),this}},{key:"withOriginal",value:function(e){return this.withDetail({originalEvent:e})}},{key:"withDetail",value:function(e){return this.defaultOptions.detail||(this.defaultOptions.detail={}),Object.assign(this.defaultOptions.detail,e),this}},{key:"fire",value:function(){var e=new CustomEvent(this.name,this.defaultOptions);return this.target&&this.target.dispatchEvent(e),e}}]),e}(),a=function(){function e(){n(this,e)}return i(e,null,[{key:"dispatch",value:function(e,t){return new o(e,t)}},{key:"dispatchAndFire",value:function(e,t,n){return new o(e,t).withOptions(n).fire()}}]),e}();t["default"]=a}).call(t,function(){return this}())},,function(e,t,n){(function(e){/*!
	 * FlexCss.Modal
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_MODAL_ASYNC_TARGET_LOADED=t.EVENT_MODAL_INIT=t.EVENT_MODAL_OPENED=t.EVENT_MODAL_BEFORE_CLOSED=t.EVENT_MODAL_CLOSED=void 0;var r=n(2),l=i(r),s=n(5),u=i(s),d=n(1),c=i(d),f=n(4),h=i(f),v=e.document.documentElement,p=27,m="data-new-instance",y="data-close-modal",E="data-modal",g="front",C="open",_="current",O="part-of-stack",S="modal-open",T="modal-container",b="modal-anim-end",L="loader-container",N="loader",w=t.EVENT_MODAL_CLOSED="flexcss.modal.closed",k=t.EVENT_MODAL_BEFORE_CLOSED="flexcss.modal.beforeClose",I=t.EVENT_MODAL_OPENED="flexcss.modal.opened",M=t.EVENT_MODAL_INIT="flexcss.modal.init",F=t.EVENT_MODAL_ASYNC_TARGET_LOADED="flexcss.modal.asyncTargetLoaded",A=function(){function t(n,i){o(this,t);var a=e.document,r=n instanceof HTMLElement?n:a.getElementById(n);if(!r)throw"Could not found container element by given ID/Element: "+n;this.currentOpen=null,this.loading=!1,this.container=r,this.options={classNames:"modal",closeOnEscape:!0,closeOnBackgroundClick:!0,destroyOnFinish:!1,fixedContainer:!0,containerClassNames:""},Object.assign(this.options,i),this.eventContainer=null,this.eventFunction=null,this.dataMainPageContainer=e.document.body,this.currentScrollTop=0,this.modalContainer=null,this.destroyOnFinish=this.options.destroyOnFinish}return a(t,[{key:"_removeModalFromStack",value:function(e){var n=t._modalInstances.indexOf(e),i=this;n>-1&&(t._modalInstances.splice(n,1),0===t._modalInstances.length&&i.dataMainPageContainer&&setTimeout(function(){i.options.fixedContainer&&(i.dataMainPageContainer.style.position="static",i.dataMainPageContainer.style.top="0px",document.documentElement.scrollTop=i.currentScrollTop,document.body.scrollTop=i.currentScrollTop),l["default"].get().scrollbarUpdateNodes.forEach(function(e){e.style.paddingRight=""}),v.classList.remove(S)},0))}},{key:"getModalContainer",value:function(){return this.modalContainer}},{key:"close",value:function(e){var n=this,i=n.currentOpen?c["default"].applyOptionsFromElement(n.currentOpen,c["default"].copy(n.options)):n.options;if(!i.closeOnEscape&&e instanceof KeyboardEvent)return!1;if(!i.closeOnBackgroundClick&&e&&e.type===l["default"].getTabEvent()&&!e.target.hasAttribute(y))return!1;if(n.loading)return!1;if(e&&e.preventDefault(),n.currentOpen){var o=u["default"].dispatchAndFire(n.currentOpen,k);if(o.defaultPrevented)return!1;if(this._finishState(n.currentOpen),n.currentOpen.prevModal)return n.switchModals(n.currentOpen.prevModal,n.currentOpen.prevModal.prevModal||null);u["default"].dispatch(n.currentOpen,w).withOriginal(e).fire()}if(n._removeModalFromStack(n.currentOpen),n.currentOpen=null,n.modalContainer){var a=t._modalInstances[t._modalInstances.length-1],r=n.modalContainer.classList;r.remove(g),r.remove(C);for(var s=0;s<n.modalContainer.childNodes.length;s++){var d=n.modalContainer.childNodes[s],f=d.classList;n._finishState(d),f.remove(_),f.remove(O)}a&&a.parentNode.classList.add(g)}return n.destroyOnFinish&&n.destroy(),n}},{key:"_finishState",value:function(e){e.classList.remove(b)}},{key:"_finishAnim",value:function(e,t){e.target.classList.add(b),e.target.removeEventListener(e.type,t,!0)}},{key:"switchModals",value:function(e,n){e.prevModal=n,t._modalInstances.push(e),n&&(this._finishState(n),c["default"].prefixedAnimateEvent(n,"AnimationEnd",this._finishAnim),n.classList.add(O)),this.currentOpen=e;for(var i=t._modalInstances,o=0;o<i.length;o++)i[o].parentNode.classList.remove(g);this.modalContainer.classList.add(g),c["default"].prefixedAnimateEvent(e,"AnimationEnd",this._finishAnim);for(var a=0;a<this.modalContainer.childNodes.length;a++){var r=this.modalContainer.childNodes[a],l=r.classList.contains(_);r===e?(e.classList.add(_),e.classList.remove(O),this._finishState(e)):(r.classList.remove(_),l&&(this._removeModalFromStack(r),u["default"].dispatchAndFire(r,w)))}}},{key:"handleScrollbar",value:function(){var n=this;if(0===t._modalInstances.length){var i=void 0,o=void 0;n.options.fixedContainer&&(i=e.pageYOffset,o=n.dataMainPageContainer,n.currentScrollTop=i),l["default"].get().scrollbarUpdateNodes.map(function(t){return{n:t,padding:parseInt(e.getComputedStyle(t).paddingRight)+l["default"].getScrollbarWidth()+"px"}}).forEach(function(e){e.n.style.paddingRight=e.padding}),n.options.fixedContainer&&o&&(o.style.cssText+="top:"+(-1*i+"px")+";position:fixed"),v.classList.add(S)}}},{key:"createWidget",value:function(n){var i=this;if(this.loading)return!1;if(n&&n.target){var o=c["default"].parentsUntil(n.target,function(e){return e&&e.flexModalInstance});if(o!==this.container)return!1}var a,r,s,d,f=!0,v=n instanceof HTMLElement,p=h["default"].isWidget(n);if(v||p)v?a=n:(s=n,a=s.element);else{if(d=n.target,!d)throw"Could not find target, did you pass an event, a HTMLElement or an Widget?";if(f=d.hasAttribute(E),a=d.getAttribute(E),s=h["default"].findWidget(d),d.hasAttribute(m)&&!n.newInstance){var _=new t(this.container).setDestroyOnFinish(!0);return n.newInstance=!0,_.fromEvent(n).then(function(){_.registerEvents(_.getModalContainer())}),!1}f&&(n.stopImmediatePropagation(),n.preventDefault())}if(!f)return!1;var O=this.modalContainer?this.modalContainer.classList:[];if(this.modalContainer)O.add(C);else{this.modalContainer=e.document.createElement("div"),this.modalContainer.className=T+" "+this.options.containerClassNames+" "+C;var S=function(e){return i.loading?!1:c["default"].isPartOfNode(e.target,i.currentOpen)&&!e.target.hasAttribute(y)?!1:void i.close(e)};this.modalContainer.addEventListener(l["default"].getTabEvent(),S,!1),O=this.modalContainer.classList,this.container.appendChild(this.modalContainer)}var b=void 0,w=e.document,k=function(e){if(e){b=w.createElement("div"),b.className=L;var t=w.createElement("div");t.className=N,b.appendChild(t),i.modalContainer.appendChild(b)}else b.parentNode.removeChild(b)};this.handleScrollbar(),O.add(g),O.add("loading"),this.loading=!0,k(!0);var I=s?s.getAsync():null;if(h["default"].isWidget(s)&&I)r=I.then(function(e){var t;if(e instanceof HTMLElement||e instanceof DocumentFragment)t=e;else{var n=w.createElement("div");n.className=i.options.classNames,n.innerHTML=e,n.id=c["default"].guid(),t=n}return s.finalContent=t,u["default"].dispatchAndFire(d,F),t});else{var A=a instanceof HTMLElement||a instanceof DocumentFragment?a:w.getElementById(a);if(!A)throw"Could not found given modal element (content) with ID: "+a;r=new Promise(function(e){e(A)})}return u["default"].dispatchAndFire(d,M),r.then(function(e){return e.hfWidgetInstance=i,i.modalContainer.appendChild(e),O.remove("loading"),i.loading=!1,k(!1),i.open(e,!0,n),e})}},{key:"open",value:function(e,t,n){t||(this.modalContainer.classList.add("open"),this.handleScrollbar()),this.switchModals(e,this.currentOpen),u["default"].dispatch(e,I).withOriginal(n).fire()}},{key:"registerEvents",value:function(e){var t=e||this.container,n=this;return t.flexModalInstance=n,n.eventFunction=function(){n.createWidget.apply(n,arguments)},t.addEventListener(l["default"].getTabEvent(),n.eventFunction,!1),n.eventContainer=t,n}},{key:"fromWidget",value:function(e){return this.createWidget(e)}},{key:"fromEvent",value:function(e){return this.createWidget(e)}},{key:"setDestroyOnFinish",value:function(e){return this.destroyOnFinish=e,this}},{key:"destroy",value:function(){var t=this,n=this.modalContainer,i=0===n.childNodes.length;if(t.eventContainer&&t.eventContainer.removeEventListener(l["default"].getTabEvent(),t.eventFunction,!0),i&&n.parentNode&&n.parentNode.removeChild(n),e.MutationObserver){var o=new MutationObserver(function(e){e.forEach(function(){i&&(n.parentNode.removeChild(n),o.disconnect())})});o.observe(n,{childList:!0})}else n.addEventListener("DOMNodeRemoved",function(e){e.target!==n&&n.childNodes.length-1===0&&n.parentNode.removeChild(n)})}}]),t}();t["default"]=A,A._modalInstances=[],e.addEventListener("keydown",function(e){if(e.keyCode===p){var t=A._modalInstances[A._modalInstances.length-1];t&&h["default"].findWidget(t).close(e)}})}).call(t,function(){return this}())},,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),a=i(o),r=n(2),l=i(r),s=n(4),u=i(s);t["default"]={Modal:a["default"],Settings:l["default"],Widget:u["default"]}}])});
//# sourceMappingURL=../maps/modal.min.map
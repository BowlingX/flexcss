!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FlexCss=t():e.FlexCss=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="../",t(0)}([function(e,t,n){e.exports=n(19)},function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=["webkit","moz","MS","o",""],r="is-collision-left",a="is-collision-right",s="is-collision-bottom",l=function(){function t(){n(this,t)}return i(t,null,[{key:"prefixedAnimateEvent",value:function(e,t,n){for(var i=function l(t){n.apply(e,[t,l])},r=0;r<o.length;r++){var a=t;o[r]||(a=t.toLowerCase());var s=o[r]+a;e.addEventListener(s,i,!0)}}},{key:"whichTransitionEndEvent",value:function(){var e=void 0,t=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}},{key:"isPartOfNode",value:function(e,t){if(!e||!t)return!1;for(var n=e;n!==t&&null!==n&&n!==t;)n=n.parentNode;return null!==n}},{key:"closestCallback",value:function(e,t){for(var n=e;null!==n;){if(t(n))return n;n=n.parentNode}return!1}},{key:"parentsUntil",value:function(e,t){if(!e)return!1;for(var n=e;!t(n)&&null!==n;)n=n.parentNode;return n}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+(e()+e()+e())}},{key:"getScrollBarWidth",value:function(){var t=e.document,n=t.createElement("p");n.style.width="100%",n.style.height="200px";var i=t.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.overflow="hidden",i.appendChild(n),t.body.appendChild(i);var o=n.offsetWidth;i.style.overflow="scroll";var r=n.offsetWidth;return o===r&&(r=i.clientWidth),t.body.removeChild(i),o-r}},{key:"addEventOnce",value:function(e,t,n,i){var o=function r(o){n(o,n),t.removeEventListener(e,r,i)};return t.addEventListener(e,o,i),o}},{key:"isVisible",value:function(e){return e.offsetWidth>0&&e.offsetHeight>0}},{key:"dashToCamelCase",value:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}},{key:"copy",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"applyOptionsFromElement",value:function(e,n){if(!e)return n;for(var i=e.attributes,o=0;o<i.length;o++){var r=i[o];if(r){var a=t.dashToCamelCase(r.nodeName.replace("data-","")),s=r.nodeValue;if(n.hasOwnProperty(a)){if("function"==typeof n[a])continue;"boolean"==typeof n[a]?n[a]=1===parseInt(s||1,10):n[a]=s}}}return n}},{key:"setupPositionNearby",value:function(e,n,i,o,l){var u=0,d=0;t.parentsUntil(e.parentNode,function(e){if(!(e instanceof HTMLElement))return!1;var i=window.getComputedStyle(e);return t.isPartOfNode(n,e)?(i&&"relative"===i.position&&(u+=e.offsetTop||0,d+=e.offsetLeft||0),!1):!0});var c=e instanceof HTMLElement?e.getBoundingClientRect():e,f=n.getBoundingClientRect(),h=i.getBoundingClientRect(),v=c.top-u,m=c.right,p=v-f.height<=0,y=window.innerHeight<v+u+c.height+f.height,E=m<f.width,g=c.left,_=g+f.width>h.width,C=n.classList;C.remove(a),C.remove(r),C.remove(s);var S=void 0,O=void 0;if(E&&!_)O=c.left-h.left-d+"px",C.add(r);else{var b=m-f.width-h.left-d+"px",w=(g+c.width/2-f.width/2||0)-h.left,L=w+f.width>h.width;o&&!L?O=w+"px":(C.add(a),O=b)}return y||l&&!p?(S=v-f.height-h.top+"px",C.add(s)):S=v+c.height-h.top+"px",n.style.cssText="top:"+S+";left:"+O+";",n}},{key:"scrollToElement",value:function(e,t){e.scrollIntoView();var n=t;if(n&&("function"==typeof n&&(n=t()),n>0)){var i=window.pageYOffset;i&&window.scroll(0,i-n)}}}]),t}();t["default"]=l}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),s=i(a);e.FLEXCSS_GLOBAL_SETTINGS||!function(){e.FLEXCSS_GLOBAL_SETTINGS={smallBreakpoint:768,scrollbarUpdateNodes:null!==e.document.body?[e.document.body]:[],darkenerFadeDelay:100,canvasToggledClass:"toggled-canvas"},e.FLEXCSS_CONST_IS_IOS=null,e.FLEXCSS_CONST_IS_TOUCH=null,e.FLEXCSS_CONST_IS_IE=null,e.FLEXCSS_CONST_TAB_EVENT="click",e.FLEXCSS_IS_SMALL_SCREEN=!1;var t=function(){e.FLEXCSS_CONST_SCROLLBAR_WIDTH=s["default"].getScrollBarWidth(),e.FLEXCSS_CONST_TRANSITION_EVENT=s["default"].whichTransitionEndEvent()};"loading"!==e.document.readyState?t():document.addEventListener("DOMContentLoaded",function(){t()})}();var l=function(){function t(){o(this,t)}return r(t,null,[{key:"setup",value:function(t){Object.assign(e.FLEXCSS_GLOBAL_SETTINGS,t)}},{key:"get",value:function(){return e.FLEXCSS_GLOBAL_SETTINGS}},{key:"isIosDevice",value:function(){return e.FLEXCSS_CONST_IS_IOS||(e.FLEXCSS_CONST_IS_IOS=e.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)),e.FLEXCSS_CONST_IS_IOS}},{key:"isSmallScreen",value:function(){return window.innerWidth<t.get().smallBreakpoint}},{key:"isTouchDevice",value:function(){return e.FLEXCSS_CONST_IS_TOUCH||(e.FLEXCSS_CONST_IS_TOUCH="ontouchstart"in window||!!e.navigator.msMaxTouchPoints),e.FLEXCSS_CONST_IS_TOUCH}},{key:"isIE",value:function(){return e.FLEXCSS_CONST_IS_IE||(e.FLEXCSS_CONST_IS_IE="ActiveXObject"in window),e.FLEXCSS_CONST_IS_IE}},{key:"getTransitionEvent",value:function(){return e.FLEXCSS_CONST_TRANSITION_EVENT}},{key:"getScrollbarWidth",value:function(){return e.FLEXCSS_CONST_SCROLLBAR_WIDTH}},{key:"getTabEvent",value:function(){return e.FLEXCSS_CONST_TAB_EVENT}}]),t}();t["default"]=l}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){if(!e.CustomEvent||"function"!=typeof e.CustomEvent){var t=function(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i};t.prototype=e.Event.prototype,e.CustomEvent=t}}();var o=function(){function e(t,i){n(this,e),this.target=t,this.defaultOptions={bubbles:!0,cancelable:!0},this.name=i}return i(e,[{key:"withOptions",value:function(e){return Object.assign(this.defaultOptions,e||{}),this}},{key:"withOriginal",value:function(e){return this.withDetail({originalEvent:e})}},{key:"withDetail",value:function(e){return this.defaultOptions.detail||(this.defaultOptions.detail={}),Object.assign(this.defaultOptions.detail,e),this}},{key:"fire",value:function(){var e=new CustomEvent(this.name,this.defaultOptions);return this.target&&this.target.dispatchEvent(e),e}}]),e}(),r=function(){function e(){n(this,e)}return i(e,null,[{key:"dispatch",value:function(e,t){return new o(e,t)}},{key:"dispatchAndFire",value:function(e,t,n){return new o(e,t).withOptions(n).fire()}}]),e}();t["default"]=r}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function t(i){var o=this;if(n(this,t),this.asyncContent=null,this._isWidget=!0,i){if(this.element=i instanceof HTMLElement?i:e.document.getElementById(i),!this.element)throw new Error("Could not found element with ID: "+i);this.element.hfWidgetInstance=this,this.setAsync(function(){return new Promise(function(e){e(o.element)})})}this.finalContent=null}return o(t,[{key:"getAsync",value:function(){return this.asyncContent()}},{key:"setAsync",value:function(e){return this.asyncContent=e,this}},{key:"getFinalContent",value:function(){return this.finalContent}},{key:"setElement",value:function(e){return this.element=e,this}},{key:"destroy",value:function(){return this.finalContent&&this.finalContent.parentNode?(this.finalContent.parentNode.removeChild(this.finalContent),!0):(delete this.element,delete this.asyncContent,delete this.finalContent,!1)}}],[{key:"findWidget",value:function(e){return e?e.hfWidgetInstance:void 0}},{key:"isWidget",value:function(e){return e instanceof t||"object"===("undefined"==typeof e?"undefined":i(e))&&e.hasOwnProperty("_isWidget")}}]),t}();t["default"]=r}).call(t,function(){return this}())},,,function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_AFTER_FIXED_REMOVE=t.EVENT_BEFORE_FIXED_ADD=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=i(l),d=n(10),c=i(d),f=n(3),h=i(f),v=n(1),m=i(v),p="fixed-window-open",y=t.EVENT_BEFORE_FIXED_ADD="flexcss.fixedWindow.beforeAdd",E=t.EVENT_AFTER_FIXED_REMOVE="flexcss.fixedWindow.afterRemove",g=void 0,_=function(){function t(){o(this,t),this.widgets=[],this.currentScrollTop=0,this.fixedScreenConstraints=[],this.windowWidth=0,this.isFixedWindowActive=!1,this.touchListener=null}return s(t,[{key:"addScreenConstraint",value:function(e,t){this.fixedScreenConstraints[e]=t}},{key:"getCurrentWidget",value:function(){return this.widgets.length>0?this.widgets[this.widgets.length-1]:null}},{key:"_checkFixedNeeded",value:function(){var e=this;if(0!==this.widgets.length){var t=new Set(this.widgets),n=Array.from(t).some(function(t){var n=t.widget;return e.fixedScreenConstraints[n]&&e.fixedScreenConstraints[n](e.windowWidth)});n?this._addFixedContainer():this._removeFixedContainer()}}},{key:"_addFixedContainer",value:function(){var t=this;if(!this.isFixedWindowActive){h["default"].dispatchAndFire(e.document,y,{detail:this.getCurrentWidget()}),u["default"].get().scrollbarUpdateNodes.map(function(t){var n="paddingRight",i=1,o=t;if(t instanceof Array){var r=a(t,3),s=r[0],l=r[1],d=r[2];n=l,o=s,i=d||1}return{node:o,property:n,value:parseInt(e.getComputedStyle(o)[n],10)+(o.__fixedWindowMod__?0:u["default"].getScrollbarWidth()*i)+"px"}}).forEach(function(e){e.node.__fixedWindowMod__=!0,e.node.style[e.property]=e.value}),this.touchListener=function(e){e.preventDefault()};var n=!1;this.touchStartListener=function(e){var i=t.getCurrentWidget(),o=i.element;m["default"].isPartOfNode(e.target,o)&&(0===o.scrollTop?(o.scrollTop=1,n=!0):o.scrollHeight===o.scrollTop+o.offsetHeight&&(n=!0,o.scrollTop-=1))},e.addEventListener("touchmove",this.touchListener),e.document.body.addEventListener("touchstart",this.touchStartListener),this.touchMoveListener=function(e){var i=t.getCurrentWidget(),o=i.element;m["default"].isPartOfNode(e.target,o)&&(n||e.stopImmediatePropagation(),n=!1)},e.document.body.addEventListener("touchmove",this.touchMoveListener),e.document.documentElement.classList.add(p),this.isFixedWindowActive=!0}}},{key:"_removeFixedContainer",value:function(){this.isFixedWindowActive&&(e.removeEventListener("touchmove",this.touchListener),e.document.body.removeEventListener("touchstart",this.touchStartListener),e.document.body.removeEventListener("touchmove",this.touchMoveListener),u["default"].get().scrollbarUpdateNodes.forEach(function(e){if(e instanceof Array){var t=a(e,2),n=t[0],i=t[1];delete n.__fixedWindowMod__,n.style[i]=""}else delete e.__fixedWindowMod__,e.style.paddingRight=""}),e.document.documentElement.classList.remove(p),h["default"].dispatchAndFire(e.document,E),this.isFixedWindowActive=!1)}},{key:"resizeListener",value:function(){this.windowWidth=e.innerWidth,this._checkFixedNeeded()}},{key:"close",value:function(){this.widgets.pop(),0===this.widgets.length&&(this._removeFixedContainer(),resolve())}},{key:"open",value:function(e,t){var n=!1;if("object"===("undefined"==typeof e?"undefined":r(e))){var i=e.constructor,o=this.fixedScreenConstraints[e.constructor];i&&o&&(n=o(this.windowWidth));var a=this.widgets.length;this.widgets.push({widget:i,element:t}),0===a&&n&&this._addFixedContainer()}}}],[{key:"getInstance",value:function(){if(!g){g=new t,g.windowWidth=e.innerWidth;var n=g.resizeListener.bind(g);e.addEventListener("resize",(0,c["default"])(n,500)),e.addEventListener("orientationchange",n)}return g}}]),t}();t["default"]=_}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_MODAL_ASYNC_TARGET_LOADED=t.EVENT_MODAL_INIT=t.EVENT_MODAL_OPENED=t.EVENT_MODAL_BEFORE_CLOSED=t.EVENT_MODAL_CLOSED=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),s=i(a),l=n(3),u=i(l),d=n(1),c=i(d),f=n(4),h=i(f),v=n(7),m=i(v),p=e.document.documentElement,y=27,E="data-new-instance",g="data-close-modal",_="data-modal",C="front",S="open",O="current",b="part-of-stack",w="modal-open",L="modal-container",T="modal-anim-end",N="loader-container",k="loader",F=t.EVENT_MODAL_CLOSED="flexcss.modal.closed",I=t.EVENT_MODAL_BEFORE_CLOSED="flexcss.modal.beforeClose",A=t.EVENT_MODAL_OPENED="flexcss.modal.opened",M=t.EVENT_MODAL_INIT="flexcss.modal.init",x=t.EVENT_MODAL_ASYNC_TARGET_LOADED="flexcss.modal.asyncTargetLoaded",W=function(){function t(n,i){o(this,t);var r=e.document,a=n instanceof HTMLElement?n:r.getElementById(n);if(!a)throw new Error("Could not found container element by given ID/Element: "+n);this.currentOpen=null,this.loading=!1,this.container=a,this.options={classNames:"modal",closeOnEscape:!0,closeOnBackgroundClick:!0,destroyOnFinish:!1,fixedContainer:!0,containerClassNames:""},Object.assign(this.options,i),this.eventContainer=null,this.eventFunction=null,this.dataMainPageContainer=e.document.body,this.currentScrollTop=0,this.modalContainer=null,this.destroyOnFinish=this.options.destroyOnFinish}return r(t,[{key:"_removeModalFromStack",value:function(e){var n=t._modalInstances.indexOf(e);n>-1&&(t._modalInstances.splice(n,1),m["default"].getInstance().close(),p.classList.remove(w))}},{key:"getModalContainer",value:function(){return this.modalContainer}},{key:"close",value:function(e){var n=this,i=n.currentOpen?c["default"].applyOptionsFromElement(n.currentOpen,c["default"].copy(n.options)):n.options;if(!i.closeOnEscape&&e instanceof KeyboardEvent)return!1;if(!i.closeOnBackgroundClick&&e&&e.type===s["default"].getTabEvent()&&!e.target.hasAttribute(g))return!1;if(n.loading)return!1;if(e&&e.preventDefault(),n.currentOpen){var o=u["default"].dispatchAndFire(n.currentOpen,I);if(o.defaultPrevented)return!1;if(this._finishState(n.currentOpen),n.currentOpen.prevModal)return n.switchModals(n.currentOpen.prevModal,n.currentOpen.prevModal.prevModal||null);u["default"].dispatch(n.currentOpen,F).withOriginal(e).fire()}if(n._removeModalFromStack(n.currentOpen),n.currentOpen=null,n.modalContainer){var r=t._modalInstances[t._modalInstances.length-1],a=n.modalContainer.classList;a.remove(C),a.remove(S);for(var l=0;l<n.modalContainer.childNodes.length;l++){var d=n.modalContainer.childNodes[l],f=d.classList;n._finishState(d),f.remove(O),f.remove(b)}r&&r.parentNode.classList.add(C)}return n.destroyOnFinish&&n.destroy(),n}},{key:"_finishState",value:function(e){e.classList.remove(T)}},{key:"_finishAnim",value:function(e,t){e.target.classList.add(T),e.target.removeEventListener(e.type,t,!0)}},{key:"switchModals",value:function(e,n){e.prevModal=n,t._modalInstances.push(e),m["default"].getInstance().open(this,this.modalContainer),n&&(this._finishState(n),c["default"].prefixedAnimateEvent(n,"AnimationEnd",this._finishAnim),n.classList.add(b)),this.currentOpen=e;for(var i=t._modalInstances,o=0;o<i.length;o++)i[o].parentNode.classList.remove(C);this.modalContainer.classList.add(C),c["default"].prefixedAnimateEvent(e,"AnimationEnd",this._finishAnim);for(var r=0;r<this.modalContainer.childNodes.length;r++){var a=this.modalContainer.childNodes[r],s=a.classList.contains(O);a===e?(e.classList.add(O),e.classList.remove(b),this._finishState(e)):(a.classList.remove(O),s&&(this._removeModalFromStack(a),u["default"].dispatchAndFire(a,F)))}}},{key:"handleScrollbar",value:function(){0===t._modalInstances.length&&p.classList.add(w)}},{key:"createWidget",value:function(n){var i=this;if(this.loading)return!1;if(n&&n.target){var o=c["default"].parentsUntil(n.target,function(e){return e&&e.flexModalInstance});if(o!==this.container)return!1}var r,a,l,d,f=!0,v=n instanceof HTMLElement,m=h["default"].isWidget(n);if(v||m)v?r=n:(l=n,r=l.element);else{if(d=n.target,!d)throw"Could not find target, did you pass an event, a HTMLElement or an Widget?";if(f=d.hasAttribute(_),r=d.getAttribute(_),l=h["default"].findWidget(d),d.hasAttribute(E)&&!n.newInstance){var p=new t(this.container).setDestroyOnFinish(!0);return n.newInstance=!0,p.fromEvent(n).then(function(){p.registerEvents(p.getModalContainer())}),!1}f&&(n.stopImmediatePropagation(),n.preventDefault())}if(!f)return!1;var y=this.modalContainer?this.modalContainer.classList:[];if(this.modalContainer)y.add(S);else{this.modalContainer=e.document.createElement("div"),this.modalContainer.className=L+" "+this.options.containerClassNames+" "+S;var O=function(e){return i.loading?!1:c["default"].isPartOfNode(e.target,i.currentOpen)&&!e.target.hasAttribute(g)?!1:void i.close(e)};this.modalContainer.addEventListener(s["default"].getTabEvent(),O,!1),y=this.modalContainer.classList,this.container.appendChild(this.modalContainer)}var b=void 0,w=e.document,T=function(e){if(e){b=w.createElement("div"),b.className=N;var t=w.createElement("div");t.className=k,b.appendChild(t),i.modalContainer.appendChild(b)}else b.parentNode.removeChild(b)};this.handleScrollbar(),y.add(C),y.add("loading"),this.loading=!0,T(!0);var F=l?l.getAsync():null;if(h["default"].isWidget(l)&&F)a=F.then(function(e){var t;if(e instanceof HTMLElement||e instanceof DocumentFragment)t=e;else{var n=w.createElement("div");n.className=i.options.classNames,n.innerHTML=e,n.id=c["default"].guid(),t=n}return l.finalContent=t,u["default"].dispatchAndFire(d,x),t});else{var I=r instanceof HTMLElement||r instanceof DocumentFragment?r:w.getElementById(r);if(!I)throw"Could not found given modal element (content) with ID: "+r;a=new Promise(function(e){e(I)})}return u["default"].dispatchAndFire(d,M),a.then(function(e){return e.hfWidgetInstance=i,i.modalContainer.appendChild(e),y.remove("loading"),i.loading=!1,T(!1),i.open(e,!0,n),e})}},{key:"open",value:function(e,t,n){t||(this.modalContainer.classList.add("open"),this.handleScrollbar()),this.switchModals(e,this.currentOpen),u["default"].dispatch(e,A).withOriginal(n).fire()}},{key:"registerEvents",value:function(e){var n=e||this.container,i=this;return m["default"].getInstance().addScreenConstraint(t,function(e){return!0}),n.flexModalInstance=i,i.eventFunction=function(){i.createWidget.apply(i,arguments)},n.addEventListener(s["default"].getTabEvent(),i.eventFunction,!1),i.eventContainer=n,i}},{key:"fromWidget",value:function(e){return this.createWidget(e)}},{key:"fromEvent",value:function(e){return this.createWidget(e)}},{key:"setDestroyOnFinish",value:function(e){return this.destroyOnFinish=e,this}},{key:"destroy",value:function(){var t=this,n=this.modalContainer,i=0===n.childNodes.length;if(t.eventContainer&&t.eventContainer.removeEventListener(s["default"].getTabEvent(),t.eventFunction,!0),i&&n.parentNode&&n.parentNode.removeChild(n),e.MutationObserver){var o=new MutationObserver(function(e){e.forEach(function(){i&&(n.parentNode.removeChild(n),o.disconnect())})});o.observe(n,{childList:!0})}else n.addEventListener("DOMNodeRemoved",function(e){e.target!==n&&n.childNodes.length-1===0&&n.parentNode.removeChild(n)})}}]),t}();W._modalInstances=[],e.addEventListener("keydown",function(e){if(e.keyCode===y){var t=W._modalInstances[W._modalInstances.length-1];t&&h["default"].findWidget(t).close(e)}}),t["default"]=W}).call(t,function(){return this}())},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return function(){clearTimeout(e.timeout),e.timeout=setTimeout(e,t)}}},,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l);t["default"]={Modal:r["default"],Settings:s["default"],Widget:u["default"]}}])});
//# sourceMappingURL=../maps/modal.min.map
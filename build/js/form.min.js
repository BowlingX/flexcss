!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FlexCss=e():t.FlexCss=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="../",e(0)}([function(t,e,n){t.exports=n(17)},function(t,e){(function(t){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var o=["webkit","moz","MS","o",""],i="is-collision-left",a="is-collision-right",s="is-collision-bottom",l=function(){function e(){n(this,e)}return r(e,null,[{key:"prefixedAnimateEvent",value:function(t,e,n){for(var r=function s(e){n.apply(t,[e,s])},i=0;i<o.length;i++){o[i]||(e=e.toLowerCase());var a=o[i]+e;t.addEventListener(a,r,!0)}}},{key:"whichTransitionEndEvent",value:function(){var t=void 0,e=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}},{key:"isPartOfNode",value:function(t,e){if(!t||!e)return!1;for(var n=t;n!==e&&null!==n&&n!==e;)n=n.parentNode;return null!==n}},{key:"parentsUntil",value:function(t,e){if(!t)return!1;for(var n=t;!e(n)&&null!==n;)n=n.parentNode;return n}},{key:"guid",value:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},{key:"getScrollBarWidth",value:function(){var e=t.document,n=e.createElement("p");n.style.width="100%",n.style.height="200px";var r=e.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.overflow="hidden",r.appendChild(n),e.body.appendChild(r);var o=n.offsetWidth;r.style.overflow="scroll";var i=n.offsetWidth;return o===i&&(i=r.clientWidth),e.body.removeChild(r),o-i}},{key:"addEventOnce",value:function(t,e,n,r){var o=function i(o){n(o,n),e.removeEventListener(t,i,r)};return e.addEventListener(t,o,r),o}},{key:"isVisible",value:function(t){return t.offsetWidth>0&&t.offsetHeight>0}},{key:"dashToCamelCase",value:function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}},{key:"copy",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"applyOptionsFromElement",value:function(t,n){if(!t)return n;for(var r=t.attributes,o=0;o<r.length;o++){var i=r[o];if(i){var a=e.dashToCamelCase(i.nodeName.replace("data-","")),s=i.nodeValue;if(n.hasOwnProperty(a)){if("function"==typeof n[a])continue;"boolean"==typeof n[a]?n[a]=1===parseInt(s||1):n[a]=s}}}return n}},{key:"setupPositionNearby",value:function(t,n,r,o,l){var u=0,f=0;e.parentsUntil(t.parentNode,function(t){if(!(t instanceof HTMLElement))return!1;var r=window.getComputedStyle(t);return e.isPartOfNode(n,t)?(r&&"relative"===r.position&&(u+=t.offsetTop||0,f+=t.offsetLeft||0),!1):!0});var d=t instanceof HTMLElement?t.getBoundingClientRect():t,c=n.getBoundingClientRect(),h=r.getBoundingClientRect(),p=d.top-u,v=d.right,m=p-c.height<=0,y=window.innerHeight<p+u+d.height+c.height,E=v<c.width,b=d.left,g=b+c.width>h.width,_=n.classList;_.remove(a),_.remove(i),_.remove(s);var T=void 0,O=void 0;if(E&&!g)O=d.left-h.left-f+"px",_.add(i);else{var S=v-c.width-h.left-f+"px",w=(b+d.width/2-c.width/2||0)-h.left,C=w+c.width>h.width;o&&!C?O=w+"px":(_.add(a),O=S)}return y||l&&!m?(T=p-c.height-h.top+"px",_.add(s)):T=p+d.height-h.top+"px",n.style.cssText="top:"+T+";left:"+O+";",n}},{key:"scrollToElement",value:function(t,e){if(t.scrollIntoView(),e&&("function"==typeof e&&(e=e()),e>0)){var n=window.scrollY||window.pageYOffset;n&&window.scroll(0,n-e)}}}]),e}();e["default"]=l}).call(e,function(){return this}())},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),l=r(s);t.FLEXCSS_GLOBAL_SETTINGS||!function(){t.FLEXCSS_GLOBAL_SETTINGS={smallBreakpoint:768,scrollbarUpdateNodes:null!==t.document.body?[t.document.body]:[],darkenerFadeDelay:100,canvasToggledClass:"toggled-canvas"},t.FLEXCSS_CONST_IS_IOS=null,t.FLEXCSS_CONST_IS_TOUCH=null,t.FLEXCSS_CONST_IS_IE=null,t.FLEXCSS_CONST_TAB_EVENT="click";var e=function(){t.FLEXCSS_CONST_SCROLLBAR_WIDTH=l["default"].getScrollBarWidth(),t.FLEXCSS_CONST_TRANSITION_EVENT=l["default"].whichTransitionEndEvent()};"loading"!==t.document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}();var u=function(){function e(){o(this,e)}return i(e,null,[{key:"setup",value:function(e){a(t.FLEXCSS_GLOBAL_SETTINGS,e)}},{key:"get",value:function(){return t.FLEXCSS_GLOBAL_SETTINGS}},{key:"isIosDevice",value:function(){return t.FLEXCSS_CONST_IS_IOS||(t.FLEXCSS_CONST_IS_IOS=t.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)),t.FLEXCSS_CONST_IS_IOS}},{key:"isTouchDevice",value:function(){return t.FLEXCSS_CONST_IS_TOUCH||(t.FLEXCSS_CONST_IS_TOUCH="ontouchstart"in window||!!t.navigator.msMaxTouchPoints),t.FLEXCSS_CONST_IS_TOUCH}},{key:"isIE",value:function(){return t.FLEXCSS_CONST_IS_IE||(t.FLEXCSS_CONST_IS_IE="ActiveXObject"in window),t.FLEXCSS_CONST_IS_IE}},{key:"getTransitionEvent",value:function(){return t.FLEXCSS_CONST_TRANSITION_EVENT}},{key:"getScrollbarWidth",value:function(){return t.FLEXCSS_CONST_SCROLLBAR_WIDTH}},{key:"getTabEvent",value:function(){return t.FLEXCSS_CONST_TAB_EVENT}}]),e}();e["default"]=u}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){n(this,t),this.listeners=[]}return r(t,[{key:"destroy",value:function(){this.listeners.forEach(function(t){t.element.removeEventListener.apply(t.element,t.args)}),this.listeners=[]}},{key:"addEventListener",value:function(t,e,n,r){return this.listeners.push({element:t,args:[e,n,r]}),t.addEventListener(e,n,r),n}}]),t}();e["default"]=o},,function(t,e){(function(t){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0}),void function(){if(!t.CustomEvent||"function"!=typeof t.CustomEvent){var e;e=function(t,e){var n;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n},e.prototype=t.Event.prototype,t.CustomEvent=e}}();var i=function(){function t(e,r){n(this,t),this.target=e,this.defaultOptions={bubbles:!0,cancelable:!0},this.name=r}return o(t,[{key:"withOptions",value:function(t){return r(this.defaultOptions,t||{}),this}},{key:"withOriginal",value:function(t){return this.withDetail({originalEvent:t})}},{key:"withDetail",value:function(t){return this.defaultOptions.detail||(this.defaultOptions.detail={}),r(this.defaultOptions.detail,t),this}},{key:"fire",value:function(){var t=new CustomEvent(this.name,this.defaultOptions);return this.target&&this.target.dispatchEvent(t),t}}]),t}(),a=function(){function t(){n(this,t)}return o(t,null,[{key:"dispatch",value:function(t,e){return new i(t,e)}},{key:"dispatchAndFire",value:function(t,e,n){return new i(t,e).withOptions(n).fire()}}]),t}();e["default"]=a}).call(e,function(){return this}())},function(t,e,n){(function(t){/*!
	 * FlexCss.Tooltip
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function b(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:b(o,e,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var f=n(1),d=r(f),c=n(3),h=r(c),p="tooltip-container",v="open",m="data-class",y=t.document,E=function(t){function e(t,n){o(this,e);var r=i(this,Object.getPrototypeOf(e).call(this));if(r.container=t instanceof HTMLElement?t:y.getElementById(t),!r.container)throw"Could not create Tooltip, DelegateContainer not found";return r.tooltipContainer=null,r.options={containerClass:"",selectorAttribute:"data-tooltip"},u(r.options,n||{}),r}return a(e,t),s(e,[{key:"createTooltip",value:function(t,e,n,r){if(e&&(!e||""!==e.trim())){var o=this.tooltipContainer;o||(o=y.createElement("div"),this.container.appendChild(o),this.tooltipContainer=o),this._restoreClassNames(o,t),o.style.left="auto",o.style.top="auto",o.innerHTML=e,o.flexTooltipCurrentTarget=t,n&&(t.oldTitle=e,t.removeAttribute("title")),d["default"].setupPositionNearby(r||t,o,this.container,!0,!0),o.classList.add(v)}}},{key:"_restoreClassNames",value:function(t,e){var n=[p,this.options.containerClass],r=e.getAttribute(m);return r&&n.push(r),t.className=n.join(" "),this}},{key:"getCurrentTarget",value:function(){return this.tooltipContainer?this.tooltipContainer.flexTooltipCurrentTarget:null}},{key:"destroy",value:function(){return l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.tooltipContainer?(this.tooltipContainer.parentNode.removeChild(this.tooltipContainer),!0):!1}},{key:"removeTooltip",value:function(t){if(!t&&this.tooltipContainer&&(t=this.tooltipContainer.flexTooltipCurrentTarget),this.tooltipContainer){if(this.tooltipContainer.flexTooltipCurrentTarget!==t)return;this.tooltipContainer.classList.remove(v),delete this.tooltipContainer.flexTooltipCurrentTarget}t&&t.oldTitle&&t.setAttribute("title",t.oldTitle)}},{key:"registerEvents",value:function(){var t=this;return this.addEventListener(this.container,"mouseover",function(e){e.target.hasAttribute(t.options.selectorAttribute)&&t.createTooltip(e.target,e.target.getAttribute("title"),!0)}),this.addEventListener(this.container,"mouseout",function(e){e.target.hasAttribute(t.options.selectorAttribute)&&t.removeTooltip(e.target)}),this}}]),e}(h["default"]);e["default"]=E}).call(e,function(){return this}())},,function(t,e,n){(function(t){/*!
	 * FlexCss.Form
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function U(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:U(o,e,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e.EVENT_FORM_AJAX_COMPLETED=e.EVENT_FORM_AFTER_AJAX_SUBMIT=e.EVENT_FORM_SUBMIT=e.EVENT_FORM_READY=void 0;var f=n(9);for(var d in f)"default"!==d&&Object.defineProperty(e,d,{enumerable:!0,get:function(){return f[d]}});var c=n(6),h=r(c),p=n(5),v=r(p),m=n(1),y=r(m),E=n(2),b=r(E),g=n(3),_=r(g),T="loading",O="data-flexcss-invalid",S="data-remote",w="data-remote-action",C="data-disable-inline-validation",k="data-disable-realtime-validation",F="data-validate",L="data-validation-message",A="data-custom-label",x="data-validate-visibility",I="data-error-target",N="data-depends-selector",V="json",P="input",j=20,M=150,R=e.EVENT_FORM_READY="flexcss.form.ready",D=e.EVENT_FORM_SUBMIT="flexcss.form.submit",B=e.EVENT_FORM_AFTER_AJAX_SUBMIT="flexcss.form.afterAjaxSubmit",H=e.EVENT_FORM_AJAX_COMPLETED="flexcss.form.ajaxCompleted",X=function(e){function n(t,e){o(this,n);var r=i(this,Object.getPrototypeOf(n).call(this));if(!(t instanceof HTMLFormElement))throw"argument {0} form needs to be an form element";return r.form=t,r.tooltips=null,r.currentValidationFuture=new Promise(function(){}),r.options={createTooltips:!0,appendError:!1,ajaxSubmitType:"POST",ajaxJsonContentType:"application/json; charset=utf-8",inlineValidation:!0,realtime:!0,realtimeTimeout:250,formatErrorTooltip:function(t){return'<i class="icon-attention"></i> '+t},inputErrorClass:"invalid",containerErrorClass:"form-error",fetchOptions:{credentials:"include"},tooltipContainer:t,scrollToElementDiff:0},u(r.options,e),y["default"].applyOptionsFromElement(t,r.options),t.hfWidgetInstance=r,r._validators=n.globalValidators,r._remoteValidationFunction=null,r.initFormValidation(),r}return a(n,e),s(n,[{key:"destroy",value:function(){l(Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.tooltips&&this.tooltips.destroy()}},{key:"_submitFunction",value:function(t,e){var r=t.getAttribute(S),o=t.getAttribute(w)||t.getAttribute("action")||window.location.href,i=V===r,a=this,s=v["default"].dispatch(t,D).withOriginal(e).fire();if(s.defaultPrevented)return a._formStopLoading(),!1;if(null===r)return t.submit();e.preventDefault();var l={"X-Requested-With":"XMLHttpRequest"};i&&u(l,{"Content-Type":this.options.ajaxJsonContentType});var f=u(this.options.fetchOptions,{headers:l,method:this.options.ajaxSubmitType}),d=i?fetch(o,u(f,{body:JSON.stringify(this.serialize())})):fetch(o,u(f,{body:new FormData(t)}));return v["default"].dispatch(t,B).withOriginal(e).fire(),d.then(function(r){(a._remoteValidationFunction||n.globalRemoteValidationFunction).apply(a,[r]),v["default"].dispatch(t,H).withOriginal(e).withDetail({response:r}).fire(),a._formStopLoading()})}},{key:"serialize",value:function(){var t=['input[name]:not([type="radio"]):enabled','input[type="radio"][name]:checked',"select[name]:enabled","textarea[name]:enabled"],e=this.form.querySelectorAll(t.join(",")),n={};return Array.prototype.forEach.call(e,function(t){var e=n[t.name],r=t.value;e instanceof Array?e.push(r):e?n[t.name]=[n[t.name],r]:n[t.name]=r}),n}},{key:"handleValidation",value:function(t,e){var n=this,r=t instanceof Array||t instanceof NodeList?t:[t];return this._handleValidation(r,e,!0).then(function(t){return t.foundAnyError||n.tooltips&&n.tooltips.removeTooltip(),t}.bind(this))}},{key:"_handleValidation",value:function(t,e,r){var o=this,i=n._createArrayFromInvalidFieldList(t),a=i.length>0;a&&e&&o._focusElement(i[0]);var s=r?this._customValidationsForElements(t):o.validateCustomFields();return s.then(function(n){a&&(n.foundAnyError=!0);var s=r?t:Array.from(i).concat(n.checkedFields);n.checkedFields=s;var l=o.prepareErrors(s,!1),u=l[0];return u&&(e?(o._focusElement(u),document.activeElement!==u&&o._handleTooltipHideClickAfterChange()):o._handleTooltipHideClickAfterChange(),o.showAndOrCreateTooltip(u)),n})}},{key:"_setupErrorMessages",value:function(t,e){return n.globalErrorMessageHandler?n.globalErrorMessageHandler.apply(this,[t,e]):!1}},{key:"_handleLabels",value:function(t){Object.keys(t).forEach(function(e){var n=this.getForm().querySelectorAll('[for="'+e+'"]'),r=t[e];if(n.length)for(var o=0;o<n.length;o++){var i=n[o];r?this._markElementInvalid(i):this._markElementValid(i)}}.bind(this))}},{key:"_markElementInvalid",value:function(t){t.setAttribute(O,"true"),t.classList.add(this.options.inputErrorClass)}},{key:"_markElementValid",value:function(t){t.removeAttribute(O),t.classList.remove(this.options.inputErrorClass)}},{key:"_getInvalidElements",value:function(){return Array.prototype.filter.call(this.getForm().querySelectorAll(":invalid"),function(t){return!(t instanceof HTMLFieldSetElement)})}},{key:"_removeElementErrors",value:function(t){for(var e=t.querySelectorAll("."+this.options.containerErrorClass),n=t.querySelectorAll("["+O+"]"),r=0;r<e.length;r++)e[r].parentNode.removeChild(e[r]);for(var o=0;o<n.length;o++){var i=n[o];this._markElementValid(i)}}},{key:"registerValidator",value:function(t,e){return this._validators[t]=e,this}},{key:"_runValidation",value:function(t,e){if(!this._validators[t])throw"Could not found validator: "+t;var n=e.classList,r=this._validators[t].apply(this,[e,this.form]);return n.add(T),r.then(function(){n.remove(T)}),r}},{key:"_customValidationsForElements",value:function(t){for(var e=[],r=t.length,o=[],i=0;r>i;i++){var a=t[i],s=a.getAttribute(F),l=a.validity;if(this._validators[s]){if(n._shouldNotValidateField(a)||l&&!l.customError&&!l.valid)continue;o.push(a),e.push(this._runValidation(s,a))}else s&&console.warn("data-validate was set but no validator was found")}return Promise.all(e).then(function(t){for(var e=t.length,n={checkedFields:o,foundAnyError:!1},r=0;e>r;r++)if(!t[r]){n.foundAnyError=!0;break}return n})}},{key:"removeErrors",value:function(){return this._removeElementErrors(this.form),this.tooltips&&this.tooltips.removeTooltip(),this}},{key:"prepareErrors",value:function(t,e){function r(t,e,n){var r=n.getAttribute(A)||n.id,o=e[r];r&&(o=o?o:t,e[r]=o)}e&&this.removeErrors();for(var o={},i=[],a=0;a<t.length;a++){var s=t[a],l=n._findErrorTarget(s),u=l.parentNode,f=s.validity,d=f&&!f.valid;if(!n._shouldNotValidateField(s)){if(s.flexFormsSavedValidity=JSON.parse(JSON.stringify(f)),r(d,o,s),d){e||this._removeElementErrors(u),this._setupErrorMessages(s,f);var c=s.validationMessage;this._markElementInvalid(l),this._markElementInvalid(s),this.options.appendError&&u.insertAdjacentHTML("beforeend",'<div class="'+this.options.containerErrorClass+'">'+c+"</div>"),i.push(s),s.flexFormsSavedValidationMessage=c}else this._markElementValid(l),this._markElementValid(s),delete s.flexFormsSavedValidationMessage,this._removeElementErrors(u);s.setCustomValidity("")}}if(1===t.length){var s=t[0],h=s.getAttribute(A)||s.id;if(h){var p=Array.from(this.getForm().querySelectorAll("["+A+'="'+h+'"], #'+h));p.forEach(function(t){var e=t.validity,n=e&&!e.valid&&this._isElementInvalidElement(t);r(n,o,t)}.bind(this))}}return this._handleLabels(o),i}},{key:"validateCustomFields",value:function(){return this._customValidationsForElements(this.form.querySelectorAll("[data-validate]"))}},{key:"getForm",value:function(){return this.form}},{key:"registerRemoteValidation",value:function(t){return this._remoteValidationFunction=t,this}},{key:"_formatErrorTooltip",value:function(t){return this.options.formatErrorTooltip.apply(this,[t])}},{key:"showAndOrCreateTooltip",value:function(t,e){var r=this;if(!this.tooltips&&this.options.createTooltips&&(this.tooltips=new h["default"](this.options.tooltipContainer,{containerClass:"error-tooltip"})),!this.options.createTooltips)return!1;if(!t.flexFormsSavedValidity)return!1;var o=n._findErrorTarget(t);return!t.flexFormsSavedValidity.valid&&r._isElementInvalidElement(o)?(r.tooltips.createTooltip(o,r._formatErrorTooltip(t.flexFormsSavedValidationMessage),!1),!0):(e&&r.tooltips.removeTooltip(),!1)}},{key:"_isElementInvalidElement",value:function(t){return t.hasAttribute(O)}},{key:"_checkIsInvalid",value:function(t){t.preventDefault();var e=this.getForm().querySelectorAll(":invalid");return this._handleValidation(e,!0,!1)}},{key:"_getDependentFields",value:function(t){var e=t.getAttribute(N),n=[t];return e&&n.push.apply(n,Array.prototype.slice.apply(this.getForm().querySelectorAll(e))),n}},{key:"_handleTooltipInline",value:function(t){this.tooltips&&this.tooltips.removeTooltip(t)}},{key:"initFormValidation",value:function(){function t(t){return!t.hasAttribute(k)&&!t.hasAttribute(C)}function e(){u=!1,clearTimeout(l)}function n(t){var e=t.getAttribute("type");return"radio"!==e&&"checkbox"!==e&&"submit"!==e}function r(t){return!t.hasAttribute(C)}var o=this,i=this.getForm(),a=this,s="invalid";i.addEventListener(s,function(t){t.preventDefault()},!0),y["default"].addEventOnce(s,i,function f(t){a._formLoading();var e=a._checkIsInvalid(t);e&&(a.currentValidationFuture=new Promise(function(n){e.then(function(e){setTimeout(function(){y["default"].addEventOnce(s,i,f,!0)},0),n(e),a._formStopLoading(),e.foundAnyError||(a._formLoading(),a._handleSubmit(t))})}))},!0),this.addEventListener(i,"reset",function(){o.removeErrors()});var l,u=!1;a.options.realtime&&this.addEventListener(i,P,function(e){if(!a._formIsLoading()){var n=e.target;clearTimeout(l),u||(l=setTimeout(function(){var r=document.activeElement===e.target;if(t(n)){r&&a._handleTooltipInline(),u=!0;var o=a._getDependentFields(n);a._customValidationsForElements(o).then(function(){a.prepareErrors(o,!1),r&&a.showAndOrCreateTooltip(e.target),u=!1})}},a.options.realtimeTimeout))}},!0),this.addEventListener(i,"blur",function(t){t.target.flexcssKeepTooltips||a._handleTooltipInline(t.target),delete t.target.flexcssKeepTooltips},!0),this.addEventListener(i,"focus",function(t){a._formIsLoading()||n(t.target)&&setTimeout(function(){a.showAndOrCreateTooltip(t.target)},j)},!0),a.options.inlineValidation&&this.addEventListener(i,"change",function(t){var n=t.target;if(!a._formIsLoading()&&r(n)){e();var o=n.getAttribute("name"),s=o?i.querySelectorAll('[name="'+o+'"]'):[n];1===s.length&&(s=a._getDependentFields(n)),a._customValidationsForElements(s).then(function(){a.prepareErrors(s,!1),n.flexcssKeepTooltips=a.showAndOrCreateTooltip(n,!0),n.flexcssKeepTooltips&&a._handleTooltipHideClickAfterChange()})}}),this.addEventListener(i,"submit",function d(t){a._submitListener(t,d)}),v["default"].dispatchAndFire(i,R)}},{key:"_formLoading",value:function(){this.getForm().classList.add(T)}},{key:"_formStopLoading",value:function(){this.getForm().classList.remove(T)}},{key:"_formIsLoading",value:function(){return this.getForm().classList.contains(T)}},{key:"_handleTooltipHideClickAfterChange",value:function(){var e=this;this.options.createTooltips&&setTimeout(function(){y["default"].addEventOnce(b["default"].getTabEvent(),t.document.body,function(t){e._isElementInvalidElement(t.target)||e._handleTooltipInline()})},M)}},{key:"_focusElement",value:function(t){t.focus(),y["default"].scrollToElement(t,this.options.scrollToElementDiff)}},{key:"_submitListener",value:function(t,e){var n=this.getForm(),r=this,o="submit";return this._formIsLoading()?(t.preventDefault(),!1):(this._formLoading(),n.removeEventListener(o,e),this.removeErrors(),t.preventDefault(),void(n.checkValidity()?(n.addEventListener(o,e),r.currentValidationFuture=new Promise(function(t){var e=r.validateCustomFields();e.then(function(e){var n=r._getInvalidElements(),o=r.prepareErrors(n,!1),i=o[0];i&&(r._focusElement(i),r.showAndOrCreateTooltip(i,!0)),t(e)})}),r.currentValidationFuture.then(function(e){e.foundAnyError?r._formStopLoading():r._handleSubmit(t)})):(r._formStopLoading(),n.addEventListener(o,e))))}},{key:"_handleSubmit",value:function(t){this._submitFunction(this.form,t)}}],[{key:"_shouldNotValidateField",value:function(t){var e=n._findErrorTarget(t);return e instanceof HTMLFieldSetElement||e.hasAttribute(x)&&!y["default"].isVisible(e)}},{key:"_createArrayFromInvalidFieldList",value:function(t){for(var e=[],r=0;r<t.length;++r){var o=t[r];o.validity&&!o.validity.valid&&(n._shouldNotValidateField(o)||e.push(o))}return e}},{key:"_findErrorTarget",value:function(e){var n=e.getAttribute(I)||e,r=n instanceof HTMLElement?n:t.document.getElementById(n);if(!r)throw"Given error target did not exsits:"+e;return r}},{key:"registerErrorMessageHandler",value:function(t){n.globalErrorMessageHandler=t}},{key:"init",value:function(t,e){for(var r=t instanceof HTMLElement?t.querySelectorAll("form"):document.querySelectorAll(t),o=[],i=0;i<r.length;i++)o.push(new n(r[i],e));return o}},{key:"registerValidator",value:function(t,e){return n.globalValidators[t]=e,n}},{key:"registerGlobalRemoteValidationFunction",value:function(t){return n.globalRemoteValidationFunction=t,n}}]),n}(_["default"]);e["default"]=X,X.globalValidators=[],X.globalRemoteValidationFunction=function(){},X.globalErrorMessageHandler=function(t,e){if(!e.customError){var n=t.getAttribute(L);n&&t.setCustomValidity(n)}}}).call(e,function(){return this}())},function(t,e,n){n(10),t.exports=self.fetch.bind(self)},function(t,e){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function a(t){var e=new FileReader;return e.readAsText(t),o(e)}function s(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(h.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(h.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},h.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(t){var e=t.toUpperCase();return p.indexOf(e)>-1?e:t}function u(t,e){e=e||{};var r=e.body;if(u.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",(e.headers||!this.headers)&&(this.headers=new n(e.headers)),this.method=l(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function d(t){var e=new n,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();e.append(r,o)}),e}function c(t,e){e||(e={}),this._initBody(t),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=t(n),r=e(r);var o=this.map[n];o||(o=[],this.map[n]=o),o.push(r)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,r){this.map[t(n)]=[e(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var h={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.prototype.clone=function(){return new u(this)},s.call(u.prototype),s.call(c.prototype),c.prototype.clone=function(){return new c(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},c.error=function(){var t=new c(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];c.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new c(null,{status:e,headers:{location:t}})},self.Headers=n,self.Request=u,self.Response=c,self.fetch=function(t,e){return new Promise(function(n,r){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var i;i=u.prototype.isPrototypeOf(t)&&!e?t:new u(t,e);var a=new XMLHttpRequest;a.onload=function(){var t=1223===a.status?204:a.status;if(100>t||t>599)return void r(new TypeError("Network request failed"));var e={status:t,statusText:a.statusText,headers:d(a),url:o()},i="response"in a?a.response:a.responseText;n(new c(i,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&h.blob&&(a.responseType="blob"),i.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},self.fetch.polyfill=!0}}()},,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),i=r(o),a=n(6),s=r(a),l=n(2),u=r(l);e["default"]={Form:i["default"],Settings:u["default"],Tooltip:s["default"]}}])});
//# sourceMappingURL=../maps/form.min.map
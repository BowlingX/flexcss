!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FlexCss=e():t.FlexCss=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="../",e(0)}([function(t,e,n){t.exports=n(19)},function(t,e){(function(t){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=["webkit","moz","MS","o",""],o="is-collision-left",a="is-collision-right",s="is-collision-bottom",l=function(){function e(){n(this,e)}return r(e,null,[{key:"prefixedAnimateEvent",value:function(t,e,n){for(var r=function l(e){n.apply(t,[e,l])},o=0;o<i.length;o++){var a=e;i[o]||(a=e.toLowerCase());var s=i[o]+a;t.addEventListener(s,r,!0)}}},{key:"whichTransitionEndEvent",value:function(){var t=void 0,e=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}},{key:"isPartOfNode",value:function(t,e){if(!t||!e)return!1;for(var n=t;n!==e&&null!==n&&n!==e;)n=n.parentNode;return null!==n}},{key:"closestCallback",value:function(t,e){for(var n=t;null!==n;){if(e(n))return n;n=n.parentNode}return!1}},{key:"parentsUntil",value:function(t,e){if(!t)return!1;for(var n=t;!e(n)&&null!==n;)n=n.parentNode;return n}},{key:"guid",value:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+(t()+t()+t())}},{key:"getScrollBarWidth",value:function(){var e=t.document,n=e.createElement("p");n.style.width="100%",n.style.height="200px";var r=e.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.overflow="hidden",r.appendChild(n),e.body.appendChild(r);var i=n.offsetWidth;r.style.overflow="scroll";var o=n.offsetWidth;return i===o&&(o=r.clientWidth),e.body.removeChild(r),i-o}},{key:"addEventOnce",value:function(t,e,n,r){var i=function o(i){n(i,n),e.removeEventListener(t,o,r)};return e.addEventListener(t,i,r),i}},{key:"isVisible",value:function(t){return t.offsetWidth>0&&t.offsetHeight>0}},{key:"dashToCamelCase",value:function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}},{key:"copy",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"applyOptionsFromElement",value:function(t,n){if(!t)return n;for(var r=t.attributes,i=0;i<r.length;i++){var o=r[i];if(o){var a=e.dashToCamelCase(o.nodeName.replace("data-","")),s=o.nodeValue;if(n.hasOwnProperty(a)){if("function"==typeof n[a])continue;"boolean"==typeof n[a]?n[a]=1===parseInt(s||1,10):n[a]=s}}}return n}},{key:"setupPositionNearby",value:function(t,n,r,i,l){var u=0,f=0;e.parentsUntil(t.parentNode,function(t){if(!(t instanceof HTMLElement))return!1;var r=window.getComputedStyle(t);return e.isPartOfNode(n,t)?(r&&"relative"===r.position&&(u+=t.offsetTop||0,f+=t.offsetLeft||0),!1):!0});var d=t instanceof HTMLElement?t.getBoundingClientRect():t,c=n.getBoundingClientRect(),h=r.getBoundingClientRect(),p=d.top-u,v=d.right,m=p-c.height<=0,y=window.innerHeight<p+u+d.height+c.height,E=v<c.width,b=d.left,_=b+c.width>h.width,g=n.classList;g.remove(a),g.remove(o),g.remove(s);var T=void 0,S=void 0;if(E&&!_)S=d.left-h.left-f+"px",g.add(o);else{var O=v-c.width-h.left-f+"px",C=(b+d.width/2-c.width/2||0)-h.left,w=C+c.width>h.width;i&&!w?S=C+"px":(g.add(a),S=O)}return y||l&&!m?(T=p-c.height-h.top+"px",g.add(s)):T=p+d.height-h.top+"px",n.style.cssText="top:"+T+";left:"+S+";",n}},{key:"scrollToElement",value:function(t,e){t.scrollIntoView();var n=e;if(n&&("function"==typeof n&&(n=e()),n>0)){var r=window.pageYOffset;r&&window.scroll(0,r-n)}}}]),e}();e["default"]=l}).call(e,function(){return this}())},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a);t.FLEXCSS_GLOBAL_SETTINGS||!function(){t.FLEXCSS_GLOBAL_SETTINGS={smallBreakpoint:768,scrollbarUpdateNodes:null!==t.document.body?[t.document.body]:[],darkenerFadeDelay:100,canvasToggledClass:"toggled-canvas"},t.FLEXCSS_CONST_IS_IOS=null,t.FLEXCSS_CONST_IS_TOUCH=null,t.FLEXCSS_CONST_IS_IE=null,t.FLEXCSS_CONST_TAB_EVENT="click",t.FLEXCSS_IS_SMALL_SCREEN=!1;var e=function(){t.FLEXCSS_CONST_SCROLLBAR_WIDTH=s["default"].getScrollBarWidth(),t.FLEXCSS_CONST_TRANSITION_EVENT=s["default"].whichTransitionEndEvent()};"loading"!==t.document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}();var l=function(){function e(){i(this,e)}return o(e,null,[{key:"setup",value:function(e){Object.assign(t.FLEXCSS_GLOBAL_SETTINGS,e)}},{key:"get",value:function(){return t.FLEXCSS_GLOBAL_SETTINGS}},{key:"isIosDevice",value:function(){return t.FLEXCSS_CONST_IS_IOS||(t.FLEXCSS_CONST_IS_IOS=t.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)),t.FLEXCSS_CONST_IS_IOS}},{key:"isSmallScreen",value:function(){return window.innerWidth<e.get().smallBreakpoint}},{key:"isTouchDevice",value:function(){return t.FLEXCSS_CONST_IS_TOUCH||(t.FLEXCSS_CONST_IS_TOUCH="ontouchstart"in window||!!t.navigator.msMaxTouchPoints),t.FLEXCSS_CONST_IS_TOUCH}},{key:"isIE",value:function(){return t.FLEXCSS_CONST_IS_IE||(t.FLEXCSS_CONST_IS_IE="ActiveXObject"in window),t.FLEXCSS_CONST_IS_IE}},{key:"getTransitionEvent",value:function(){return t.FLEXCSS_CONST_TRANSITION_EVENT}},{key:"getScrollbarWidth",value:function(){return t.FLEXCSS_CONST_SCROLLBAR_WIDTH}},{key:"getTabEvent",value:function(){return t.FLEXCSS_CONST_TAB_EVENT}}]),e}();e["default"]=l}).call(e,function(){return this}())},function(t,e){(function(t){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){if(!t.CustomEvent||"function"!=typeof t.CustomEvent){var e=function(t,e){var n=e||{bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),r};e.prototype=t.Event.prototype,t.CustomEvent=e}}();var i=function(){function t(e,r){n(this,t),this.target=e,this.defaultOptions={bubbles:!0,cancelable:!0},this.name=r}return r(t,[{key:"withOptions",value:function(t){return Object.assign(this.defaultOptions,t||{}),this}},{key:"withOriginal",value:function(t){return this.withDetail({originalEvent:t})}},{key:"withDetail",value:function(t){return this.defaultOptions.detail||(this.defaultOptions.detail={}),Object.assign(this.defaultOptions.detail,t),this}},{key:"fire",value:function(){var t=new CustomEvent(this.name,this.defaultOptions);return this.target&&this.target.dispatchEvent(t),t}}]),t}(),o=function(){function t(){n(this,t)}return r(t,null,[{key:"dispatch",value:function(t,e){return new i(t,e)}},{key:"dispatchAndFire",value:function(t,e,n){return new i(t,e).withOptions(n).fire()}}]),t}();e["default"]=o}).call(e,function(){return this}())},,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t),this.listeners=[]}return r(t,[{key:"destroy",value:function(){this.listeners.forEach(function(t){t.element.removeEventListener.apply(t.element,t.args)}),this.listeners=[]}},{key:"addEventListener",value:function(t,e,n,r){return this.listeners.push({element:t,args:[e,n,r]}),t.addEventListener(e,n,r),n}}]),t}();e["default"]=i},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function g(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:g(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=n(1),f=r(u),d=n(5),c=r(d),h=n(2),p=r(h),v="tooltip-container",m="open",y="data-class",E="data-no-touch",b=t.document,_=function(t){function e(t,n){i(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));if(r.container=t instanceof HTMLElement?t:b.getElementById(t),!r.container)throw new Error("Could not create Tooltip, DelegateContainer not found");return r.tooltipContainer=null,r.options={containerClass:"",selectorAttribute:"data-tooltip",collisionContainer:r.container},Object.assign(r.options,n||{}),r}return a(e,t),s(e,[{key:"createTooltip",value:function(t,e,n,r){if(e&&(!e||""!==e.trim())&&!(p["default"].isTouchDevice()&&t&&t.hasAttribute(E))){var i=this.tooltipContainer;i||(i=b.createElement("div"),this.container.appendChild(i),this.tooltipContainer=i),this._restoreClassNames(i,t),i.style.left="auto",i.style.top="auto",i.innerHTML=e,i.flexTooltipCurrentTarget=t,n&&(t.oldTitle=e,t.removeAttribute("title")),f["default"].setupPositionNearby(r||t,i,this.options.collisionContainer,!0,!0),i.classList.add(m)}}},{key:"_restoreClassNames",value:function(t,e){var n=[v,this.options.containerClass],r=e.getAttribute(y);return r&&n.push(r),t.className=n.join(" "),this}},{key:"getCurrentTarget",value:function(){return this.tooltipContainer?this.tooltipContainer.flexTooltipCurrentTarget:null}},{key:"destroy",value:function(){return l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.tooltipContainer?(this.tooltipContainer.parentNode.removeChild(this.tooltipContainer),!0):!1}},{key:"removeTooltip",value:function(t){var e=t;if(!e&&this.tooltipContainer&&(e=this.tooltipContainer.flexTooltipCurrentTarget),this.tooltipContainer){if(this.tooltipContainer.flexTooltipCurrentTarget!==e)return;this.tooltipContainer.classList.remove(m),delete this.tooltipContainer.flexTooltipCurrentTarget}e&&e.oldTitle&&e.setAttribute("title",e.oldTitle)}},{key:"registerEvents",value:function(){var t=this;return this.addEventListener(this.container,"mouseover",function(e){e.target.hasAttribute(t.options.selectorAttribute)&&t.createTooltip(e.target,e.target.getAttribute("title"),!0)}),this.addEventListener(this.container,"mouseout",function(e){e.target.hasAttribute(t.options.selectorAttribute)&&t.removeTooltip(e.target)}),this}}]),e}(c["default"]);e["default"]=_}).call(e,function(){return this}())},,,function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.EVENT_FORM_AJAX_COMPLETED=e.EVENT_FORM_AFTER_AJAX_SUBMIT=e.EVENT_FORM_SUBMIT=e.EVENT_FORM_READY=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function D(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:D(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=n(6),f=r(u);n(12);var d=n(3),c=r(d),h=n(1),p=r(h),v=n(2),m=r(v),y=n(5),E=r(y),b="loading",_="data-flexcss-invalid",g="data-remote",T="data-remote-action",S="data-disable-inline-validation",O="data-disable-realtime-validation",C="data-validate",w="data-validation-message",k="data-custom-label",F="data-validate-visibility",L="data-error-target",A="data-depends-selector",x="json",I="input",N=20,V=150,j=e.EVENT_FORM_READY="flexcss.form.ready",P=e.EVENT_FORM_SUBMIT="flexcss.form.submit",M=e.EVENT_FORM_AFTER_AJAX_SUBMIT="flexcss.form.afterAjaxSubmit",R=e.EVENT_FORM_AJAX_COMPLETED="flexcss.form.ajaxCompleted",B=function(e){function n(t,e){i(this,n);var r=o(this,Object.getPrototypeOf(n).call(this));if(!(t instanceof HTMLFormElement))throw"argument {0} form needs to be an form element";return r.form=t,r.tooltips=null,r.currentValidationFuture=new Promise(function(){}),r.options={createTooltips:!0,appendError:!1,ajaxSubmitType:"POST",ajaxJsonContentType:"application/json; charset=utf-8",inlineValidation:!0,realtime:!0,realtimeTimeout:250,formatErrorTooltip:function(t){return'<i class="icon-attention"></i> '+t},inputErrorClass:"invalid",containerErrorClass:"form-error",fetchOptions:{credentials:"include"},tooltipContainer:t,tooltipOptions:{containerClass:"error-tooltip"},scrollToElementDiff:0},Object.assign(r.options,e),p["default"].applyOptionsFromElement(t,r.options),t.hfWidgetInstance=r,r._validators=n.globalValidators,r._remoteValidationFunction=null,r.initFormValidation(),r}return a(n,e),s(n,[{key:"destroy",value:function(){l(Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.tooltips&&this.tooltips.destroy()}},{key:"_submitFunction",value:function(t,e){var r=t.getAttribute(g),i=t.getAttribute(T)||t.getAttribute("action")||window.location.href,o=x===r,a=this,s=c["default"].dispatch(t,P).withOriginal(e).fire();if(s.defaultPrevented)return a._formStopLoading(),!1;if(null===r)return t.submit();e.preventDefault();var l={"X-Requested-With":"XMLHttpRequest"};o&&Object.assign(l,{"Content-Type":this.options.ajaxJsonContentType});var u=Object.assign(this.options.fetchOptions,{headers:l,method:this.options.ajaxSubmitType}),f=o?fetch(i,Object.assign(u,{body:JSON.stringify(this.serialize())})):fetch(i,Object.assign(u,{body:new FormData(t)}));return c["default"].dispatch(t,M).withOriginal(e).fire(),f.then(function(r){(a._remoteValidationFunction||n.globalRemoteValidationFunction).apply(a,[r]),c["default"].dispatch(t,R).withOriginal(e).withDetail({response:r}).fire(),a._formStopLoading()})}},{key:"serialize",value:function(){var t=['input[name]:not([type="radio"]):enabled','input[type="radio"][name]:checked',"select[name]:enabled","textarea[name]:enabled"],e=this.form.querySelectorAll(t.join(",")),n={};return Array.prototype.forEach.call(e,function(t){var e=n[t.name],r=t.value;e instanceof Array?e.push(r):e?n[t.name]=[n[t.name],r]:n[t.name]=r}),n}},{key:"handleValidation",value:function(t,e){var n=this,r=t instanceof Array||t instanceof NodeList?t:[t];return this._handleValidation(r,e,!0).then(function(t){return t.foundAnyError||n.tooltips&&n.tooltips.removeTooltip(),t}.bind(this))}},{key:"_handleValidation",value:function(t,e,r){var i=this,o=n._createArrayFromInvalidFieldList(t),a=o.length>0;a&&e&&i._focusElement(o[0]);var s=r?this._customValidationsForElements(t):i.validateCustomFields();return s.then(function(n){a&&(n.foundAnyError=!0);var s=r?t:Array.from(o).concat(n.checkedFields);n.checkedFields=s;var l=i.prepareErrors(s,!1),u=l[0];return u&&(e?(i._focusElement(u),document.activeElement!==u&&i._handleTooltipHideClickAfterChange()):i._handleTooltipHideClickAfterChange(),i.showAndOrCreateTooltip(u)),n})}},{key:"_setupErrorMessages",value:function(t,e){return n.globalErrorMessageHandler?n.globalErrorMessageHandler.apply(this,[t,e]):!1}},{key:"_handleLabels",value:function(t){Object.keys(t).forEach(function(e){var n=this.getForm().querySelectorAll('[for="'+e+'"]'),r=t[e];if(n.length)for(var i=0;i<n.length;i++){var o=n[i];r?this._markElementInvalid(o):this._markElementValid(o)}}.bind(this))}},{key:"_markElementInvalid",value:function(t){t.setAttribute(_,"true"),t.classList.add(this.options.inputErrorClass)}},{key:"_markElementValid",value:function(t){t.removeAttribute(_),t.classList.remove(this.options.inputErrorClass)}},{key:"_getInvalidElements",value:function(){return Array.prototype.filter.call(this.getForm().querySelectorAll(":invalid"),function(t){return!(t instanceof HTMLFieldSetElement)})}},{key:"_removeElementErrors",value:function(t){for(var e=t.querySelectorAll("."+this.options.containerErrorClass),n=t.querySelectorAll("["+_+"]"),r=0;r<e.length;r++)e[r].parentNode.removeChild(e[r]);for(var i=0;i<n.length;i++){var o=n[i];this._markElementValid(o)}}},{key:"registerValidator",value:function(t,e){return this._validators[t]=e,this}},{key:"_runValidation",value:function(t,e){if(!this._validators[t])throw"Could not found validator: "+t;var n=e.classList,r=this._validators[t].apply(this,[e,this.form]);return n.add(b),r.then(function(){n.remove(b)}),r}},{key:"_customValidationsForElements",value:function(t){for(var e=[],r=t.length,i=[],o=0;r>o;o++){var a=t[o],s=a.getAttribute(C),l=a.validity;if(this._validators[s]){if(n._shouldNotValidateField(a)||l&&!l.customError&&!l.valid)continue;i.push(a),e.push(this._runValidation(s,a))}else s&&console.warn("data-validate was set but no validator was found")}return Promise.all(e).then(function(t){for(var e=t.length,n={checkedFields:i,foundAnyError:!1},r=0;e>r;r++)if(!t[r]){n.foundAnyError=!0;break}return n})}},{key:"removeErrors",value:function(){return this._removeElementErrors(this.form),this.tooltips&&this.tooltips.removeTooltip(),this}},{key:"prepareErrors",value:function(t,e){function r(t,e,n){var r=n.getAttribute(k)||n.id,i=e[r];r&&(i=i?i:t,e[r]=i)}e&&this.removeErrors();for(var i={},o=[],a=0;a<t.length;a++){var s=t[a],l=n._findErrorTarget(s),u=l.parentNode,f=s.validity,d=f&&!f.valid;if(!n._shouldNotValidateField(s)){if(s.flexFormsSavedValidity=JSON.parse(JSON.stringify(f)),r(d,i,s),d){e||this._removeElementErrors(u),this._setupErrorMessages(s,f);var c=s.validationMessage;this._markElementInvalid(l),this._markElementInvalid(s),this.options.appendError&&u.insertAdjacentHTML("beforeend",'<div class="'+this.options.containerErrorClass+'">'+c+"</div>"),o.push(s),s.flexFormsSavedValidationMessage=c}else this._markElementValid(l),this._markElementValid(s),delete s.flexFormsSavedValidationMessage,this._removeElementErrors(u);s.setCustomValidity("")}}if(1===t.length){var h=t[0],p=h.getAttribute(k)||h.id;if(p){var v=Array.from(this.getForm().querySelectorAll("["+k+'="'+p+'"], #'+p));v.forEach(function(t){var e=t.validity,n=e&&!e.valid&&this._isElementInvalidElement(t);r(n,i,t)}.bind(this))}}return this._handleLabels(i),o}},{key:"validateCustomFields",value:function(){return this._customValidationsForElements(this.form.querySelectorAll("[data-validate]"))}},{key:"getForm",value:function(){return this.form}},{key:"registerRemoteValidation",value:function(t){return this._remoteValidationFunction=t,this}},{key:"_formatErrorTooltip",value:function(t){return this.options.formatErrorTooltip.apply(this,[t])}},{key:"showAndOrCreateTooltip",value:function(t,e){var r=this;if(!this.tooltips&&this.options.createTooltips&&(this.tooltips=new f["default"](this.options.tooltipContainer,this.options.tooltipOptions)),!this.options.createTooltips)return!1;if(!t.flexFormsSavedValidity)return!1;var i=n._findErrorTarget(t);return!t.flexFormsSavedValidity.valid&&r._isElementInvalidElement(i)?(r.tooltips.createTooltip(i,r._formatErrorTooltip(t.flexFormsSavedValidationMessage),!1),!0):(e&&r.tooltips.removeTooltip(),!1)}},{key:"_isElementInvalidElement",value:function(t){return t.hasAttribute(_)}},{key:"_checkIsInvalid",value:function(t){t.preventDefault();var e=this.getForm().querySelectorAll(":invalid");return this._handleValidation(e,!0,!1)}},{key:"_getDependentFields",value:function(t){var e=t.getAttribute(A),n=[t];return e&&n.push.apply(n,Array.prototype.slice.apply(this.getForm().querySelectorAll(e))),n}},{key:"_handleTooltipInline",value:function(t){this.tooltips&&this.tooltips.removeTooltip(t)}},{key:"initFormValidation",value:function(){function t(t){return!t.hasAttribute(O)&&!t.hasAttribute(S)}function e(){u=!1,clearTimeout(l)}function n(t){var e=t.getAttribute("type");return"radio"!==e&&"checkbox"!==e&&"submit"!==e}function r(t){return!t.hasAttribute(S)}var i=this,o=this.getForm(),a=this,s="invalid";o.addEventListener(s,function(t){t.preventDefault()},!0),p["default"].addEventOnce(s,o,function f(t){a._formLoading();var e=a._checkIsInvalid(t);e&&(a.currentValidationFuture=new Promise(function(n){e.then(function(e){setTimeout(function(){p["default"].addEventOnce(s,o,f,!0)},0),n(e),a._formStopLoading(),e.foundAnyError||(a._formLoading(),a._handleSubmit(t))})}))},!0),this.addEventListener(o,"reset",function(){i.removeErrors()});var l,u=!1;a.options.realtime&&this.addEventListener(o,I,function(e){if(!a._formIsLoading()){var n=e.target;clearTimeout(l),u||(l=setTimeout(function(){var r=document.activeElement===e.target;if(t(n)){r&&a._handleTooltipInline(),u=!0;var i=a._getDependentFields(n);a._customValidationsForElements(i).then(function(){a.prepareErrors(i,!1),r&&a.showAndOrCreateTooltip(e.target),u=!1})}},a.options.realtimeTimeout))}},!0),this.addEventListener(o,"blur",function(t){t.target.flexcssKeepTooltips||a._handleTooltipInline(t.target),delete t.target.flexcssKeepTooltips},!0),this.addEventListener(o,"focus",function(t){a._formIsLoading()||n(t.target)&&setTimeout(function(){a.showAndOrCreateTooltip(t.target)},N)},!0),a.options.inlineValidation&&this.addEventListener(o,"change",function(t){var n=t.target;if(!a._formIsLoading()&&r(n)){e();var i=n.getAttribute("name"),s=i?o.querySelectorAll('[name="'+i+'"]'):[n];1===s.length&&(s=a._getDependentFields(n)),a._customValidationsForElements(s).then(function(){a.prepareErrors(s,!1),n.flexcssKeepTooltips=a.showAndOrCreateTooltip(n,!0),n.flexcssKeepTooltips&&a._handleTooltipHideClickAfterChange()})}}),this.addEventListener(o,"submit",function d(t){a._submitListener(t,d)}),c["default"].dispatchAndFire(o,j)}},{key:"_formLoading",value:function(){this.getForm().classList.add(b)}},{key:"_formStopLoading",value:function(){this.getForm().classList.remove(b)}},{key:"_formIsLoading",value:function(){return this.getForm().classList.contains(b)}},{key:"_handleTooltipHideClickAfterChange",value:function(){var e=this;this.options.createTooltips&&setTimeout(function(){p["default"].addEventOnce(m["default"].getTabEvent(),t.document.body,function(t){e._isElementInvalidElement(t.target)||e._handleTooltipInline()})},V)}},{key:"_focusElement",value:function(t){t.focus(),p["default"].scrollToElement(t,this.options.scrollToElementDiff)}},{key:"_submitListener",value:function(t,e){var n=this.getForm(),r=this,i="submit";return this._formIsLoading()?(t.preventDefault(),!1):(this._formLoading(),n.removeEventListener(i,e),this.removeErrors(),t.preventDefault(),void(n.checkValidity()?(n.addEventListener(i,e),r.currentValidationFuture=new Promise(function(t){var e=r.validateCustomFields();e.then(function(e){var n=r._getInvalidElements(),i=r.prepareErrors(n,!1),o=i[0];o&&(r._focusElement(o),r.showAndOrCreateTooltip(o,!0)),t(e)})}),r.currentValidationFuture.then(function(e){e.foundAnyError?r._formStopLoading():r._handleSubmit(t)})):(r._formStopLoading(),n.addEventListener(i,e))))}},{key:"_handleSubmit",value:function(t){this._submitFunction(this.form,t)}}],[{key:"_shouldNotValidateField",value:function(t){var e=n._findErrorTarget(t);return e instanceof HTMLFieldSetElement||void 0===t.validity||e.hasAttribute(F)&&!p["default"].isVisible(e)}},{key:"_createArrayFromInvalidFieldList",value:function(t){for(var e=[],r=0;r<t.length;++r){var i=t[r];i.validity&&!i.validity.valid&&(n._shouldNotValidateField(i)||e.push(i))}return e}},{key:"_findErrorTarget",value:function(e){var n=e.getAttribute(L)||e,r=n instanceof HTMLElement?n:t.document.getElementById(n);if(!r)throw"Given error target did not exsits:"+e;return r}},{key:"registerErrorMessageHandler",value:function(t){n.globalErrorMessageHandler=t}},{key:"init",value:function(t,e){for(var r=t instanceof HTMLElement?t.querySelectorAll("form"):document.querySelectorAll(t),i=[],o=0;o<r.length;o++)i.push(new n(r[o],e));return i}},{key:"registerValidator",value:function(t,e){return n.globalValidators[t]=e,n}},{key:"registerGlobalRemoteValidationFunction",value:function(t){return n.globalRemoteValidationFunction=t,n}}]),n}(E["default"]);B.globalValidators=[],B.globalRemoteValidationFunction=function(){},B.globalErrorMessageHandler=function(t,e){if(!e.customError){var n=t.getAttribute(w);n&&t.setCustomValidity(n)}},e["default"]=B}).call(e,function(){return this}())},,,function(t,e,n){n(13),t.exports=self.fetch.bind(self)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function s(t){var e=new FileReader;return e.readAsText(t),o(e)}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},p.blob?(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=i(this);return t?t:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var n=e.body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=u(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function c(t){var e=new r,n=t.getAllResponseHeaders().trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function h(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof r?e.headers:new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){r.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(r)},r.prototype["delete"]=function(t){delete this.map[e(t)]},r.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},r.prototype.getAll=function(t){return this.map[e(t)]||[]},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},r.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var p={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},l.call(f.prototype),l.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},h.error=function(){var t=new h(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];h.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new h(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=f,t.Response=h,t.fetch=function(t,e){return new Promise(function(n,r){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e);var a=new XMLHttpRequest;a.onload=function(){var t=1223===a.status?204:a.status;if(100>t||t>599)return void r(new TypeError("Network request failed"));var e={status:t,statusText:a.statusText,headers:c(a),url:i()},o="response"in a?a.response:a.responseText;n(new h(o,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&p.blob&&(a.responseType="blob"),
o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=r(i),a=n(6),s=r(a),l=n(2),u=r(l);e["default"]={Form:o["default"],Settings:u["default"],Tooltip:s["default"]}}])});
//# sourceMappingURL=../maps/form.min.map